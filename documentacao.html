<!DOCTYPE html> 
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HELP SINGE - Home</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Lordicon -->
  <script src="https://cdn.lordicon.com/lordicon.js"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <!-- Custom Styles -->
  <link rel="stylesheet" href="styles.css">
  <!-- Lunr.js (opcional) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
  <!-- Font Awesome para os ícones das redes sociais -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* ================================================== */
    /*                Variáveis de Cores                  */
    /* ================================================== */
    :root {
      --color-primary: #C51631; /* vermelho */
      --color-primary-dark: #A3102A;
      --color-dark: #1A1A1A;
      --color-light: #FFFCF8; /* Cor de fundo atualizada */
      --color-text: #333333;
      --color-border: #ABB8C3;

      --transition-speed: 0.3s;
      --box-shadow-base: 0 4px 8px rgba(0, 0, 0, 0.05);
      --box-shadow-hover: 0 8px 16px rgba(0, 0, 0, 0.1);

      --card-hover-color: #f2f2f2; /* Cinza claro */
    }

    /* ============================= */
    /* 0. Sticky Footer Setup       */
    /* ============================= */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      display: flex;
      flex-direction: column;
      /* Adiciona padding inferior para evitar que o chatbot se sobreponha ao rodapé */
      padding-bottom: 150px;
    }
    main {
      flex: 1;
    }

    /* ============================= */
    /* 1. Global Styles             */
    /* ============================= */
    body {
      font-family: 'Arial', sans-serif;
      background-color: var(--color-light);
      color: var(--color-text);
    }

    /* ============================= */
    /* 2. Navbar                    */
    /* ============================= */
    .navbar {
      background-color: var(--color-dark);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .navbar .navbar-brand {
      color: var(--color-light);
      font-weight: bold;
      text-decoration: none;
    }
    .navbar .navbar-brand:hover {
      color: var(--color-primary) !important;
    }
    .navbar .nav-link {
      color: var(--color-light);
      transition: color var(--transition-speed);
    }
    .navbar .nav-link:hover {
      color: var(--color-primary) !important;
    }
    .navbar .nav-link.active {
      color: #EAF5F9;
    }
    /* Customização do ícone do menu (hamburger) para mobile */
    .navbar-toggler {
      border-color: var(--color-primary) !important;
    }
    .navbar-toggler-icon {
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='var(--color-primary)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
    }

    /* ============================= */
    /* 3. Header (Banner Principal) */
    /* ============================= */
    /* Alinha o título à esquerda, conforme solicitado */
    header .row.align-items-center > .col-md-8 {
      text-align: left !important;
    }
    header .row.align-items-center > .col-md-4 {
      text-align: right !important;
    }
    
    /* Alinhamento consistente para cabeçalho e cards */
    header .container,
    section .container {
      color-text: #C51631;
      max-width: 1140px;
      margin-left: auto;
      margin-right: auto;
      padding-left: 15px;
      padding-right: 15px;
      margin-top: 50px;
    }

    /* ============================= */
    /* 4. Seção Geral               */
    /* ============================= */
    section {
      background-color: var(--color-light);
      padding: 50px 0;
    }
    @media (max-width: 576px) {
      section {
        padding: 30px 0;
      }
    }

    /* ============================= */
    /* 5. Cards de Documentação/Home */
    /* ============================= */
    .card {
      transition: transform var(--transition-speed), box-shadow var(--transition-speed);
      border: 1px solid var(--color-border);
      border-radius: 10px;
      background-color: var(--color-light);
      color: var(--color-text);
      box-shadow: var(--box-shadow-base);
      margin-bottom: 1rem;
    }
    .card-body {
      padding: 20px;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: var(--box-shadow-hover);
      background-color: var(--card-hover-color) !important;
    }
    .card-body i {
      transition: transform var(--transition-speed) ease;
    }
    .card:hover i {
      transform: scale(1.1);
    }
    .card i.text-primary {
      color: var(--color-primary) !important;
    }
    .card a {
      display: block;
      color: inherit;
      text-decoration: none;
    }

    /* ============================= */
    /* 6. Botões “Acessar”          */
    /* ============================= */
    .btn-primary {
      background-color: var(--color-primary) !important;
      border-color: var(--color-primary-dark) !important;
      color: #fff !important;
    }
    .btn-primary:hover {
      background-color: var(--color-light) !important;
      border-color: var(--color-primary) !important;
      color: var(--color-primary) !important;
    }

    /* ============================= */
    /* 7. Custom Footer             */
    /* ============================= */
    .custom-footer {
      background-color: var(--color-dark);
      color: var(--color-light);
      padding: 20px 0 10px 0;
      font-size: 0.9rem;
    }
    .custom-footer a {
      color: var(--color-light);
      text-decoration: none;
    }
    .custom-footer a:hover {
      color: var(--color-primary);
    }
    .custom-footer .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }
    /* Alinha os textos do rodapé à esquerda */
    .footer-contact,
    .footer-location,
    .footer-map {
      text-align: left !important;
    }
    /* Ajusta a linha inferior do rodapé para distribuir o conteúdo */
    .footer-bottom {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      border-top: 1px solid #333;
      padding-top: 10px;
      margin-top: 20px;
    }
    .footer-bottom .col-md-6:first-child {
      text-align: left;
    }
    .footer-bottom .col-md-6:last-child {
      text-align: right;
    }
    .footer-bottom .logo-bottom {
      max-width: 150px;
      height: auto;
      margin: 0 auto;
    }
    .footer-social-inside p {
      margin: 5px 0;
    }
    .footer-social-inside i {
      margin-right: 5px;
      vertical-align: middle;
    }

    /* ============================= */
    /* 8. Formulários               */
    /* ============================= */
    .form-label {
      color: var(--color-text);
    }
    .form-control {
      background-color: var(--color-light);
      color: var(--color-text);
      border: 1px solid var(--color-border);
    }
    .form-control:focus {
      border-color: var(--color-primary);
      box-shadow: none;
    }

    /* ============================= */
    /* 9. Ícone no Botão "Acessar"   */
    /* ============================= */
    .acessar-icon {
      color: var(--color-primary);
    }

    /* ============================= */
    /* 10. Chat Widget (Modernizado)  */
    /* ============================= */
    #chat-widget {
      position: fixed;
      bottom: 20px; /* valor padrão, reajustado via JS ao rolar a página */
      right: 20px;
      width: 300px;
      max-height: 400px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: 1200;
    }
    #chat-widget.chat-hidden {
      display: none;
    }
    #chat-widget.minimized #chat-messages,
    #chat-widget.minimized #chat-input {
      display: none;
    }
    #chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: linear-gradient(45deg, #c71f16, #000000);
      color: #fff;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }
    .chat-header-buttons {
      display: flex;
      gap: 10px;
    }
    #chat-header button {
      background: transparent;
      border: none;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
    }
    #chat-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      background: #f9f9f9;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .chat-message {
      padding: 10px;
      border-radius: 10px;
      max-width: 80%;
      word-wrap: break-word;
    }
    .chat-message.bot {
      background: #e0e0e0;
      color: #333;
      align-self: flex-start;
      margin-left: 10px;
      margin-right: auto;
    }
    .chat-message.user {
      background: #c51631;
      color: #fff;
      align-self: flex-end;
      margin-right: 10px;
      margin-left: auto;
    }
    #chat-input {
      display: flex;
      border-top: 1px solid #ccc;
    }
    #chat-input input {
      flex: 1;
      padding: 10px;
      border: none;
      outline: none;
    }
    #chat-input button {
      padding: 10px 15px;
      background: #C51631;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    /* Botão do Chat Toggle */
    #chat-toggle {
      position: fixed;
      bottom: 20px; /* valor padrão, reajustado via JS */
      right: 20px;
      background: transparent;
      border: none;
      border-radius: 50%;
      width: 120px;
      height: 120px;
      cursor: pointer;
      z-index: 1001;
    }
    #chat-toggle lord-icon {
      width: 100%;
      height: 100%;
    }
  </style>
  
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="https://lincetec.com.br/">LINCE TECH</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active" href="documentacao.html">Documentação</a></li>
          <li class="nav-item"><a class="nav-link" href="https://lincetec.com.br/nossa-historia/">Nossa História</a></li>
          <li class="nav-item"><a class="nav-link" href="https://lincetec.com.br/#singe">Conheça nosso ERP</a></li>
          <li class="nav-item"><a class="nav-link" href="https://lincetec.com.br/contato/">Contato</a></li>
        </ul>
      </div>
    </div>
  </nav>
  
  <!-- Conteúdo Principal -->
  <main>
    <!-- Banner Principal -->
    <header class="py-5">
      <div class="container">
        <div class="row align-items-center">
          <!-- Bloco do título e subtítulo (alinhado à esquerda) -->
          <div class="col-md-8">
            <h1 class="display-4">HELP SINGE</h1>
            <p class="lead">Acesso rápido às documentações de todas as áreas do Singe.</p>
          </div>
          <!-- Bloco da logo (alinhado à direita) -->
          <div class="col-md-4">
            <a href="https://lincetec.com.br/">
              <img src="https://lincetec.com.br/wp-content/uploads/2023/06/logo-lince-tipografia.png" 
                   alt="Lince Tech Logo" class="img-fluid" style="max-width: 250px;">
            </a>
          </div>
        </div>
      </div>
    </header>
    
    <!-- Seção de Cards (Documentação) -->
    <section class="pt-2 pb-5">
      <div class="container">
        <div class="row text-center">
          <!-- Exemplo de Card: Comercial -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/comercial.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/fcyboqbm.json" trigger="hover"
                           colors="primary:#000000,secondary:#c71f16"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Comercial</h5>
                <p class="card-text">Documentação sobre estratégias comerciais.</p>
              </div>
            </a>
          </div>
          <!-- Card 2: Contabilidade -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/contabilidade.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/fqbvgezn.json" trigger="hover"
                           colors="primary:#000000,secondary:#c71f16"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Contabilidade</h5>
                <p class="card-text">Manuais e orientações contábeis.</p>
              </div>
            </a>
          </div>
          <!-- Card 3: Custos -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/custos.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/ytklkgsc.json" trigger="hover"
                           colors="primary:#000000,secondary:#c71f16"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Custos</h5>
                <p class="card-text">Relatórios e controle de custos.</p>
              </div>
            </a>
          </div>
          <!-- Card 4: Financeiro -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/financeiro.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/bsdkzyjd.json" trigger="hover"
                           colors="primary:#000000,secondary:#c71f16"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Financeiro</h5>
                <p class="card-text">Informações financeiras e diretrizes.</p>
              </div>
            </a>
          </div>
          <!-- Card 5: Internacionalização -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/internacionalizacao.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/rpviwvwn.json" trigger="hover"
                           colors="primary:#000000,secondary:#c71f16"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Internacionalização</h5>
                <p class="card-text">Documentação para operações internacionais.</p>
              </div>
            </a>
          </div>
          <!-- Card 6: Lince Shop -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/venda_a_funcionarios.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/jprtoagx.json" trigger="hover"
                           colors="primary:#000000,secondary:#c71f16"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Lince Shop</h5>
                <p class="card-text">Guia sobre Venda a Funcionários.</p>
              </div>
            </a>
          </div>
          <!-- Card 7: Logística -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/transporte_logistica.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/zzjjvkam.json" trigger="hover"
                           colors="primary:#000000,secondary:#c71f16"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Logística</h5>
                <p class="card-text">Documentação sobre gestão logística.</p>
              </div>
            </a>
          </div>
          <!-- Card 8: Manutenção -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/manutencao.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/fwkrbvja.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Manutenção</h5>
                <p class="card-text">Procedimentos e guias de manutenção.</p>
              </div>
            </a>
          </div>
          <!-- Card 9: Marketing -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/marketing.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/ozlkyfxg.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Marketing</h5>
                <p class="card-text">Estratégias e campanhas de marketing.</p>
              </div>
            </a>
          </div>
          <!-- Card 10: P.O. -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/plano_operacional.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/fikcyfpp.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">P.O.</h5>
                <p class="card-text">Orientações operacionais e processos.</p>
              </div>
            </a>
          </div>
          <!-- Card 11: Produção -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/gestao_da_producao.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/ncmnezgk.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Produção</h5>
                <p class="card-text">Processos e gestão de produção.</p>
              </div>
            </a>
          </div>
          <!-- Card 12: Qualidade -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/gestao_da_qualidade.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/edcgvlnw.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Qualidade</h5>
                <p class="card-text">Guias e controles de qualidade.</p>
              </div>
            </a>
          </div>
          <!-- Card 13: RH -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/rh.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/jdgfsfzr.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">RH</h5>
                <p class="card-text">Recursos Humanos e gestão de pessoas.</p>
              </div>
            </a>
          </div>
          <!-- Card 14: Suprimentos -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/suprimentos.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/kezeezyg.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Suprimentos</h5>
                <p class="card-text">Informações sobre estoques e compras.</p>
              </div>
            </a>
          </div>
          <!-- Card 15: Suporte -->
          <div class="col-md-3 mb-4">
            <a href="https://helpsinge.lince.com.br/suporte.html" class="card h-100">
              <div class="card-body">
                <lord-icon src="https://cdn.lordicon.com/ogjpwrxe.json" trigger="hover"
                           colors="primary:#c71f16,secondary:#000000"
                           style="width:100px;height:100px"></lord-icon>
                <h5 class="card-title">Suporte</h5>
                <p class="card-text">Procedimentos e atendimento técnico.</p>
              </div>
            </a>
          </div>
        </div><!-- .row -->
      </div><!-- .container -->
    </section>
  </main>
  
  <!-- Rodapé -->
  <footer class="custom-footer">
    <div class="container">
      <div class="row">
        <!-- Coluna 1: Contato e Redes Sociais (alinhado à esquerda) -->
        <div class="col-md-4 text-start mb-3 footer-contact">
          <h3>Contato</h3>
          <p><a href="mailto:crm.lince@lince.com.br">crm.lince@lince.com.br</a></p>
          <div class="footer-social-inside mt-3">
            <p class="footer-social-title"><strong>Nos acompanhe nas redes sociais:</strong></p>
            <p>
              <a href="https://www.instagram.com/lincetech/" target="_blank">
                <i class="fab fa-instagram"></i> @lincetech
              </a>
            </p>
            <p>
              <a href="https://www.linkedin.com/company/lincetec" target="_blank">
                <i class="fab fa-linkedin"></i> Lince Participações e Empreendimentos
              </a>
            </p>
            <p style="margin-top:20px;">
              <a href="https://lincetec.com.br/privacy-policy/" target="_self">Política de Privacidade</a>
            </p>
          </div>
        </div>
        <!-- Coluna 2: Onde estamos (alinhado à esquerda) -->
        <div class="col-md-4 text-start mb-3 footer-location">
          <h3>Onde estamos</h3>
          <p style="margin-bottom: 0;">Rua Dr. Nereu Ramos, n° 750 Coloninha, Gaspar SC</p>
          <p style="margin-top: 5px;">Cep: 89110-110</p>
        </div>
        <!-- Coluna 3: Localização (alinhado à esquerda) -->
        <div class="col-md-4 text-start mb-3 footer-map">
          <h3>Localização</h3>
          <iframe 
            src="https://www.google.com/maps?q=Rua+Dr.+Nereu+Ramos,+750,+Coloninha,+Gaspar,+SC,+89110-110&output=embed"
            width="100%" height="150" style="border:0;" allowfullscreen="" loading="lazy">
          </iframe>
        </div>
      </div>
      <!-- Footer Bottom: logotipo à esquerda e direitos reservados à direita -->
      <div class="row mt-3 footer-bottom">
        <div class="col-md-6 text-start">
          <a href="https://lincetec.com.br/">
            <img src="https://lincetec.com.br/wp-content/uploads/2023/06/logo-lince-tipografia.png" alt="Lince Tech" class="logo-bottom">
          </a>
        </div>
        <div class="col-md-6 text-end">
          <p>&copy; 2025 LINCE TECH. Todos os direitos reservados.</p>
        </div>
      </div>
    </div>
  </footer>
  
  <!-- Botão de toggle do Chat (ícone animado) -->
  <button id="chat-toggle">
    <lord-icon
      src="https://cdn.lordicon.com/ecngpoqo.json"
      trigger="hover"
      colors="primary:#c71f16,secondary:#000000"
      style="width:100%; height:100%;">
    </lord-icon>
  </button>
  
  <!-- Widget do Chat -->
  <div id="chat-widget" class="chat-hidden">
    <div id="chat-header">
      <span>Chat</span>
      <div class="chat-header-buttons">
        <button id="chat-minimize">_</button>
        <button id="chat-close">X</button>
      </div>
    </div>
    <div id="chat-messages"></div>
    <div id="chat-input">
      <input id="message-input" type="text" placeholder="Digite sua mensagem...">
      <button id="send-button">Enviar</button>
    </div>
  </div>
  
  <!-- Scripts do Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Script do Chatbot e ajustes dinâmicos -->
  <script>
    // Função para adicionar mensagens ao chat
    function addMessage(content, sender = 'bot') {
      const chatBody = document.getElementById('chat-messages');
      const message = document.createElement('div');
      message.classList.add('chat-message', sender);
      message.innerHTML = content;
      chatBody.appendChild(message);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    // Função para processar o texto (remove espaços laterais)
    function preprocessText(text) {
      return text.trim();
    }

    // Função que define a saudação (com saudação e pergunta de ajuda)
    function getGreeting() {
      const now = new Date();
      const hour = now.getHours();
      const lang = navigator.language || 'pt-BR';
      let greeting = "";
      if (lang.toLowerCase().startsWith("en")) {
        greeting = hour < 12 ? "Good morning!" : hour < 18 ? "Good afternoon!" : "Good evening!";
        greeting += " How can I help you today? What is your question?";
      } else {
        greeting = hour < 12 ? "Bom dia!" : hour < 18 ? "Boa tarde!" : "Boa noite!";
        greeting += " Como podemos ajudar? Qual é a sua dúvida?";
      }
      return greeting;
    }

    // Exibe a mensagem de saudação ao carregar o DOM
    document.addEventListener("DOMContentLoaded", function() {
      addMessage(getGreeting(), "bot");
    });

    // Função para enviar a mensagem do usuário e buscar resposta dinâmica
    async function sendMessage() {
      const input = document.getElementById('message-input');
      const userMessage = preprocessText(input.value);
      if (userMessage) {
        addMessage(userMessage, 'user');
        input.value = '';
        handleUserMessage(userMessage);
      }
    }

    // Função que processa a mensagem do usuário e busca uma resposta dinâmica
    async function handleUserMessage(message) {
      try {
        const response = await getDynamicResponse(message);
        addMessage(response, "bot");
      } catch (error) {
        console.error("Erro no processamento:", error);
        addMessage("Ocorreu um erro ao processar sua solicitação. Por favor, tente novamente.", "bot");
      }
    }

    // IMPLEMENTAÇÃO CORRIGIDA: Busca dinâmica utilizando a base de conhecimento e Lunr.js.
    async function getDynamicResponse(query) {
      if (!window.knowledgeBase) {
        try {
          const response = await fetch('knowledgeBase.json');
          window.knowledgeBase = await response.json();
        } catch (error) {
          console.error('Erro ao carregar knowledgeBase.json:', error);
          return "Desculpe, ocorreu um erro ao carregar a base de conhecimento.";
        }
      }
      
      if (!window.lunrIndex) {
        window.lunrIndex = lunr(function() {
          this.ref('id');
          this.field('title');
          this.field('content');
          window.knowledgeBase.forEach(function(doc) {
            this.add(doc);
          }, this);
        });
      }
      
      const results = window.lunrIndex.search(query);
      if (results.length > 0) {
        const firstResultRef = results[0].ref;
        const doc = window.knowledgeBase.find(item => item.id === firstResultRef);
        return doc ? doc.content : "Desculpe, não encontrei uma resposta para sua dúvida.";
      } else {
        return "Desculpe, não encontrei uma resposta para sua dúvida.";
      }
    }

    // Eventos para envio de mensagem
    document.getElementById('message-input').addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        event.preventDefault();
        sendMessage();
      }
    });
    document.getElementById('send-button').addEventListener('click', sendMessage);

    // Eventos para abrir, minimizar e fechar o chat
    document.getElementById('chat-toggle').addEventListener('click', function() {
      const chatWidget = document.getElementById('chat-widget');
      const chatToggle = document.getElementById('chat-toggle');
      if (chatWidget.style.display === 'none' || chatWidget.style.display === '') {
        chatWidget.style.display = 'flex';
        // Oculta o ícone do chatbot quando o chat é aberto
        chatToggle.style.display = 'none';
      } else {
        chatWidget.style.display = 'none';
        chatToggle.style.display = 'block';
      }
    });
    document.getElementById('chat-minimize').addEventListener('click', function() {
      const chatWidget = document.getElementById('chat-widget');
      chatWidget.classList.toggle('minimized');
    });
    document.getElementById('chat-close').addEventListener('click', function() {
      const chatWidget = document.getElementById('chat-widget');
      const chatToggle = document.getElementById('chat-toggle');
      chatWidget.style.display = 'none';
      chatToggle.style.display = 'block';
    });

    // Ajuste dinâmico para que o ícone do chatbot não ultrapasse o rodapé
    window.addEventListener('scroll', function() {
      const chatToggle = document.getElementById('chat-toggle');
      const footer = document.querySelector('.custom-footer');
      const footerRect = footer.getBoundingClientRect();
      const defaultBottom = 20; // 20px padrão
      if (footerRect.top < window.innerHeight) {
        const overlap = window.innerHeight - footerRect.top;
        chatToggle.style.bottom = (defaultBottom + overlap) + 'px';
      } else {
        chatToggle.style.bottom = defaultBottom + 'px';
      }
    });
  </script>

  <style>
    /* Estado minimizado: oculta mensagens e área de entrada */
    #chat-widget.minimized #chat-messages,
    #chat-widget.minimized #chat-input {
      display: none;
    }
  </style>
</body>
</html>
